
<div class="department-container">
    <!-- Header Section -->
    <p-toolbar styleClass="mb-4 flex justify-between">
            <h2 class="text-xl font-bold text-primary m-0">
                <i class="pi pi-building mr-2"></i>
                Projects
            </h2>

            <div class="flex gap-2">
              <p-button label="Add" icon="pi pi-plus" pTooltip="Add project"  severity="primary" (click)="showDialog()"></p-button>
            </div>
          </p-toolbar>
           <p-toolbar styleClass="mb-4 flex justify-content-start align-items-start gap-2">
    <p-iconField>
    <p-inputIcon class="pi pi-search" />
    <input type="text" pInputText placeholder="Search" />
</p-iconField>
<p-multiSelect [options]="departments" [(ngModel)]="selectedDepartments" optionLabel="name" display="chip" placeholder="Select Departments"></p-multiSelect>
<p-multiSelect [options]="status" [(ngModel)]="selectedStatus" optionLabel="name" display="chip" placeholder="Select Status"></p-multiSelect>
<p-toolbar
  styleClass="bg-white flex justify-content-between w-full m-0 border-top-none border-left-none border-right-none border-noround">

  <p-iconField>
    <p-inputIcon class="pi pi-search" />
    <input type="text" pInputText placeholder="Search" />
  </p-iconField>
  <div class="flex gap-2">
    <p-button label="List" [rounded]="true" [text]="true" variety="text" icon="pi pi-bars" severity="secondary" size="small" />
    <p-button label="Grid" [rounded]="true" [text]="true" variety="text" icon="pi pi-th-large" severity="secondary" size="small" />
    <p-button label="Kanban" [rounded]="true" [text]="true" variety="text" icon="pi pi-clipboard" severity="secondary" size="small" />
    <p-button label="Calendar" [rounded]="true" [text]="true" variety="text" icon="pi pi-calendar" severity="secondary" size="small" />

  </div>
  <div class="flex gap-2">
    <p-button label="Filter" [rounded]="true" [outlined]="true"  icon="pi pi-filter" severity="secondary"
      size="small" />
    <p-button label="Sort" [rounded]="true" [outlined]="true"  icon="pi pi-sort-alt" severity="secondary" size="small" />
    <p-button label="Refresh" [rounded]="true" [outlined]="true"  icon="pi pi-refresh" severity="secondary" size="small" />
    <p-button label="Reset" [rounded]="true" [outlined]="true" icon="pi pi-times" severity="secondary" size="small" />

  </div>
</p-toolbar>
          </p-toolbar>
          <div class="flex flex-wrap gap-3">
<p-card header="Active">
<!-- <span>Active</span> -->
<span>15</span>
</p-card>
<p-card header="Completed">
<!-- <span>Completed</span> -->
<span>12</span>
</p-card>
<p-card header="Overdue">
<!-- <span>Overdue</span> -->
<span>12</span>
</p-card>
          </div>
          <p-card>

       <p-table [value]="projects" [(selection)]="selectedProjects" [paginator]="true" showGridlines [loading]="isLoading" [rows]="size" [rowsPerPageOptions]="[5,10,20]" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
         <th style="width: 4rem"><p-tableHeaderCheckbox /></th>
        <th>Name</th>
        <th>Owner</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Departments</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-project>
      <tr>
       <td>
                <p-tableCheckbox [value]="project" />
            </td>
        <td>{{ project.project_name }}</td>
        <td>{{ project?.owner?.firstName }} {{project?.owner?.lastName}}</td>
        <td>{{ project.start_date | date:'MM/dd/yyyy'}}</td>
        <td>{{ project.end_date | date:'MM/dd/yyyy'}}</td>
        <td>
          <p-tag *ngFor="let department of project.departments">{{department.department_name}}</p-tag>
        </td>
        <td>
          <span [ngClass]="{
            'text-green-500': project.status === 'Completed',
            'text-blue-500': project.status === 'In Progress',
            'text-yellow-500': project.status === 'On Hold',
            'text-gray-500': project.status === 'Not Started'
          }">
            <p-tag [value]="project?.status" [severity]="getSeverity(project.status)" />
          </span>
        </td>
        <td>
          <button pButton icon="pi pi-pencil" class="p-button-text p-button-rounded p-button-info"></button>
          <button pButton icon="pi pi-trash" class="p-button-text p-button-rounded p-button-danger"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
          </p-card>

<div >
<app-add-project [visible]="addProjectVisible"  (closeModal)="onAddProjectClose($event)"></app-add-project>
